###############################################################################
# This file is part of "Patrick's Programming Library Toolkit", ppltk.
# Web: https://github.com/pfedick/ppltk
#
###############################################################################
# Copyright (c) 2024, Patrick Fedick <patrick@pfp.de>
# All rights reserved.
#
# Redistribution and use in source and binary forms, with or without
# modification, are permitted provided that the following conditions are met:
#
# 1. Redistributions of source code must retain the above copyright notice,
#    this list of conditions and the following disclaimer.
# 2. Redistributions in binary form must reproduce the above copyright notice,
#    this list of conditions and the following disclaimer in the documentation
#    and/or other materials provided with the distribution.
#
# THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDER AND CONTRIBUTORS "AS IS"
# AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
# IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE
# ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER AND CONTRIBUTORS BE
# LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR
# CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF
# SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS
# INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN
# CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE
# ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF
# THE POSSIBILITY OF SUCH DAMAGE.
###############################################################################

CXX		= g++
EXTRA_CFLAGS =
INCLUDE	= -I include
CFLAGS	= -ggdb -O3 -march=native -Wall  $(INCLUDE) $(EXTRA_CFLAGS) @LIBPPL7_CFLAGS@ @SDL2_CFLAGS@
LIB		= @LIBPPL7_LIBS@  @SDL2_LIBS@ -lstdc++
LIBDEP	:= @LIBPPL7@
PROGRAM	= ppltk


OBJECTS = compile/Button.o \
	compile/checkbox.o \
	compile/combobox.o \
	compile/Divider.o \
	compile/doubleslider.o \
	compile/Event.o \
	compile/Frame.o \
	compile/Label.o \
	compile/LineInput.o \
	compile/listwidget.o \
	compile/radiobutton.o \
	compile/scrollbar.o \
	compile/SizePolicy.o \
	compile/slider.o \
	compile/SpinBox.o \
	compile/Surface.o \
	compile/TextEdit.o \
	compile/Widget.o \
	compile/WidgetStyle.o \
	compile/Window.o \
	compile/WindowManager.o \
	compile/WindowManager_SDL2.o \
	compile/layout_Layout.o \
	compile/layout_BoxLayout.o \
	compile/layout_HBoxLayout.o \
	compile/layout_VBoxLayout.o \
	compile/layout_FormLayout.o 


$(PROGRAM): $(OBJECTS) compile/main.o $(LIBDEP)
	$(CC) -o $(PROGRAM) $(OBJECTS) compile/main.o $(CFLAGS) $(LIB)
	-chmod 755 $(PROGRAM)

all: $(PROGRAM)

clean:
	-rm -f *.o $(PROGRAM) *.core compile


compile/main.o: demo/main.cpp Makefile include/ppltk.h demo/demo.h
	- @mkdir -p compile
	$(CXX) -o compile/main.o -c demo/main.cpp $(CFLAGS)

compile/Button.o: src/Button.cpp Makefile include/ppltk.h
	- @mkdir -p compile
	$(CXX) -o compile/Button.o -c src/Button.cpp $(CFLAGS)

compile/checkbox.o: src/checkbox.cpp Makefile include/ppltk.h
	- @mkdir -p compile
	$(CXX) -o compile/checkbox.o -c src/checkbox.cpp $(CFLAGS)

compile/combobox.o: src/combobox.cpp Makefile include/ppltk.h
	- @mkdir -p compile
	$(CXX) -o compile/combobox.o -c src/combobox.cpp $(CFLAGS)

compile/Divider.o: src/Divider.cpp Makefile include/ppltk.h
	- @mkdir -p compile
	$(CXX) -o compile/Divider.o -c src/Divider.cpp $(CFLAGS)

compile/doubleslider.o: src/doubleslider.cpp Makefile include/ppltk.h
	- @mkdir -p compile
	$(CXX) -o compile/doubleslider.o -c src/doubleslider.cpp $(CFLAGS)

compile/Event.o: src/Event.cpp Makefile include/ppltk.h
	- @mkdir -p compile
	$(CXX) -o compile/Event.o -c src/Event.cpp $(CFLAGS)

compile/Frame.o: src/Frame.cpp Makefile include/ppltk.h
	- @mkdir -p compile
	$(CXX) -o compile/Frame.o -c src/Frame.cpp $(CFLAGS)

compile/Label.o: src/Label.cpp Makefile include/ppltk.h
	- @mkdir -p compile
	$(CXX) -o compile/Label.o -c src/Label.cpp $(CFLAGS)

compile/LineInput.o: src/LineInput.cpp Makefile include/ppltk.h
	- @mkdir -p compile
	$(CXX) -o compile/LineInput.o -c src/LineInput.cpp $(CFLAGS)

compile/listwidget.o: src/listwidget.cpp Makefile include/ppltk.h
	- @mkdir -p compile
	$(CXX) -o compile/listwidget.o -c src/listwidget.cpp $(CFLAGS)

compile/radiobutton.o: src/radiobutton.cpp Makefile include/ppltk.h
	- @mkdir -p compile
	$(CXX) -o compile/radiobutton.o -c src/radiobutton.cpp $(CFLAGS)

compile/scrollbar.o: src/scrollbar.cpp Makefile include/ppltk.h
	- @mkdir -p compile
	$(CXX) -o compile/scrollbar.o -c src/scrollbar.cpp $(CFLAGS)

compile/SizePolicy.o: src/SizePolicy.cpp Makefile include/ppltk.h
	- @mkdir -p compile
	$(CXX) -o compile/SizePolicy.o -c src/SizePolicy.cpp $(CFLAGS)

compile/slider.o: src/slider.cpp Makefile include/ppltk.h
	- @mkdir -p compile
	$(CXX) -o compile/slider.o -c src/slider.cpp $(CFLAGS)

compile/SpinBox.o: src/SpinBox.cpp Makefile include/ppltk.h
	- @mkdir -p compile
	$(CXX) -o compile/SpinBox.o -c src/SpinBox.cpp $(CFLAGS)

compile/Surface.o: src/Surface.cpp Makefile include/ppltk.h
	- @mkdir -p compile
	$(CXX) -o compile/Surface.o -c src/Surface.cpp $(CFLAGS)

compile/TextEdit.o: src/TextEdit.cpp Makefile include/ppltk.h
	- @mkdir -p compile
	$(CXX) -o compile/TextEdit.o -c src/TextEdit.cpp $(CFLAGS)

compile/Widget.o: src/Widget.cpp Makefile include/ppltk.h include/ppltk_layout.h
	- @mkdir -p compile
	$(CXX) -o compile/Widget.o -c src/Widget.cpp $(CFLAGS)

compile/WidgetStyle.o: src/WidgetStyle.cpp Makefile include/ppltk.h
	- @mkdir -p compile
	$(CXX) -o compile/WidgetStyle.o -c src/WidgetStyle.cpp $(CFLAGS)

compile/Window.o: src/Window.cpp Makefile include/ppltk.h
	- @mkdir -p compile
	$(CXX) -o compile/Window.o -c src/Window.cpp $(CFLAGS)

compile/WindowManager.o: src/WindowManager.cpp Makefile include/ppltk.h
	- @mkdir -p compile
	$(CXX) -o compile/WindowManager.o -c src/WindowManager.cpp $(CFLAGS)

compile/WindowManager_SDL2.o: src/WindowManager_SDL2.cpp Makefile include/ppltk.h
	- @mkdir -p compile
	$(CXX) -o compile/WindowManager_SDL2.o -c src/WindowManager_SDL2.cpp $(CFLAGS)


### Layout ############################################################

compile/layout_Layout.o: src/layout/Layout.cpp Makefile include/ppltk.h include/ppltk_layout.h
	- @mkdir -p compile
	$(CXX) -o compile/layout_Layout.o -c src/layout/Layout.cpp $(CFLAGS)

compile/layout_BoxLayout.o: src/layout/BoxLayout.cpp Makefile include/ppltk.h include/ppltk_layout.h
	- @mkdir -p compile
	$(CXX) -o compile/layout_BoxLayout.o -c src/layout/BoxLayout.cpp $(CFLAGS)

compile/layout_HBoxLayout.o: src/layout/HBoxLayout.cpp Makefile include/ppltk.h include/ppltk_layout.h
	- @mkdir -p compile
	$(CXX) -o compile/layout_HBoxLayout.o -c src/layout/HBoxLayout.cpp $(CFLAGS)

compile/layout_VBoxLayout.o: src/layout/VBoxLayout.cpp Makefile include/ppltk.h include/ppltk_layout.h
	- @mkdir -p compile
	$(CXX) -o compile/layout_VBoxLayout.o -c src/layout/VBoxLayout.cpp $(CFLAGS)

compile/layout_FormLayout.o: src/layout/FormLayout.cpp Makefile include/ppltk.h include/ppltk_layout.h
	- @mkdir -p compile
	$(CXX) -o compile/layout_FormLayout.o -c src/layout/FormLayout.cpp $(CFLAGS)